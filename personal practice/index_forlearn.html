<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>&lt;progress&gt; vs &lt;meter&gt; Demo</title>
  <details>
  <summary>点击查看更多</summary>
  <p>这是隐藏的详细内容。</p>
</details>
  <style>
    body{font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB",Arial, sans-serif; padding:24px; color:#222}
    h1{font-size:20px}
    .wrap{display:flex;gap:24px;align-items:flex-start}
    .card{flex:1;min-width:260px;border:1px solid #e6e6e6;border-radius:12px;padding:16px;background:#fff;box-shadow:0 6px 18px rgba(18,18,18,0.04)}
    .controls{margin-top:12px;display:grid;gap:8px}
    label{font-size:13px;color:#444}
    input[type=range]{width:100%}
    .visual{margin-top:12px}
    .row{display:flex;gap:8px;align-items:center}
    .tag{font-size:12px;color:#666}
    .hint{font-size:12px;color:#666;margin-top:8px}
    .small{font-size:12px;color:#555}
    footer{margin-top:18px;font-size:13px;color:#666}
  </style>
</head>
<body>
  <h1>&lt;progress&gt; vs &lt;meter&gt; — 可交互对比 Demo</h1>
  <p class="hint">拖动滑块改变数值，观察两者在语义和展示上的差别。页面还演示了不确定进度（indeterminate）的 &lt;progress&gt;。</p>

<details>
  <summary>点击查看更多</summary>
  <p>这是隐藏的详细内容。</p>
</details>


  <div class="wrap">
    <div class="card" aria-labelledby="progTitle">
      <h2 id="progTitle">&lt;progress&gt; — 任务进度</h2>
      <p class="small">语义：表示某项任务的完成进度（有明确的 current / max）。通常用于下载、上传、安装等过程。</p>

      <div class="visual">
        <div class="row">
          <progress id="progressBar" value="40" max="100">40%</progress>
          <span id="progressLabel" class="tag">40 / 100</span>
        </div>

        <div class="controls">
          <label for="progressRange">设置 progress 的 value（0–100）</label>
          <input id="progressRange" type="range" min="0" max="100" value="40">

          <div class="row">
            <button id="setIndeterminate">设为不确定进度 (indeterminate)</button>
            <button id="setDeterminate">恢复有值进度</button>
          </div>
        </div>
      </div>
    </div>

    <div class="card" aria-labelledby="meterTitle">
      <h2 id="meterTitle">&lt;meter&gt; — 范围内的度量</h2>
      <p class="small">语义：表示某个数值在已知范围内的相对位置。不是“任务进行到哪儿”，而是“当前值在范围里的位置”。可使用 low/high/optimum 标记区间。</p>

      <div class="visual">
        <div class="row">
          <meter id="meterEl" value="0.7" min="0" max="1" low="0.4" high="0.8" optimum="0.2">70%</meter>
          <span id="meterLabel" class="tag">0.70 (min:0 max:1)</span>
        </div>

        <div class="controls">
          <label for="meterRange">设置 meter 的 value（0.00–1.00）</label>
          <input id="meterRange" type="range" min="0" max="100" value="70">

          <label class="small">low=0.4 high=0.8 optimum=0.2（示例区间）</label>
        </div>
      </div>
    </div>
  </div>

  <footer>
    说明：在可访问性层面，&lt;progress&gt; 通常用于描述一个正在进行的任务（可读出百分比），而 &lt;meter&gt; 用来表示测量值或评分。浏览器会为两者提供不同的本地化呈现。
  </footer>

  <script>
    const progressBar = document.getElementById('progressBar');
    const progressLabel = document.getElementById('progressLabel');
    const progressRange = document.getElementById('progressRange');
    const setIndeterminate = document.getElementById('setIndeterminate');
    const setDeterminate = document.getElementById('setDeterminate');

    const meterEl = document.getElementById('meterEl');
    const meterLabel = document.getElementById('meterLabel');
    const meterRange = document.getElementById('meterRange');

    // 初始化显示
    function updateProgressDisplay() {
      const val = Number(progressRange.value);
      progressBar.value = val;
      progressLabel.textContent = val + ' / ' + progressBar.max;
      progressBar.setAttribute('aria-valuenow', val);
    }
    function updateMeterDisplay() {
      const percent = Number(meterRange.value);
      const val = (percent/100).toFixed(2);
      meterEl.value = val;
      meterLabel.textContent = val + ' (min:' + meterEl.min + ' max:' + meterEl.max + ')';
      meterEl.setAttribute('aria-valuenow', val);
    }

    progressRange.addEventListener('input', updateProgressDisplay);
    meterRange.addEventListener('input', updateMeterDisplay);

    setIndeterminate.addEventListener('click', () => {
      // 移除 value 属性 => 不确定进度
      progressBar.removeAttribute('value');
      progressLabel.textContent = '不确定（indeterminate）';
    });
    setDeterminate.addEventListener('click', () => {
      if (!progressBar.hasAttribute('value')) progressBar.value = progressRange.value;
      updateProgressDisplay();
    });

    // 初次渲染
    updateProgressDisplay();
    updateMeterDisplay();
  </script>
</body>
</html>
